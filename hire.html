<!-- GNU AGPLv3.0 2023 
  Software: v0.0.14
  Kit Logger - DofE Kit Management System
  Copyright (C) 2023 Thomas Kirby

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program [LICENSE.txt].  If not, see <https://www.gnu.org/licenses/>.
-->
<!DOCTYPE html>
<html lang="en-EN">
  <head>
    <title>Hire - Kit Logger</title>
    <!--Width Scaling and Icon-->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://i.imgur.com/ERlryfF.png" />
    <!--CSS External Stylesheet-->
    <link rel="stylesheet" href="static\style.css" type="text/css" />
    <!--Google Icons-->
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!--https://fonts.google.com/icons?preview.size=14&preview.layout=grid&classification=Display&stroke=Sans+Serif&vfonly=true&selected=Material+Symbols+Outlined:refresh:FILL@0;wght@400;GRAD@0;opsz@20&icon.size=18&icon.color=%23e8eaed&icon.platform=web-->
    <script>
      var root = document.querySelector(":root");
      var rs = getComputedStyle(root);
      root.style.setProperty("--index", "#e51846");
      root.style.setProperty("--indexHover", "#ff5177");
      root.style.setProperty("--secondary", "#e28c8c");
      root.style.setProperty("--accent", "#de5e5e");
    </script>
  </head>

  <nav>
    <!--Navigation Bar-->
    <div class="topnav">
      <a href="https://madscientist-314.github.io/kitloggerwebsite/hire">
        <span class="material-symbols-outlined">
          refresh
        </span>
      </a>
      <a href="https://madscientist-314.github.io/kitloggerwebsite/login">
        <span class="material-symbols-outlined" style="text-align: centre;">
          login
        </span>
      </a>
      <a href="https://madscientist-314.github.io/kitloggerwebsite/contact">
        Contact
      </a>
      <a href="https://madscientist-314.github.io/kitloggerwebsite/faqs">
        FAQs
      </a>
      <a
        class="active"
        href="https://madscientist-314.github.io/kitloggerwebsite/hire">
        Hire
      </a>
      <a href="https://madscientist-314.github.io/kitloggerwebsite/">
        Home
      </a>
      <a class="left" href="https://dofe.org">
        <img
          alt="DofE Logo"
          src="https://www.dofe.org/wp-content/uploads/2019/02/DofE-logo-white-minimal_new.svg"
          width="16"
          height="16">
      </a>
    </div>
  </nav>

  <body>
    <h1>Hire</h1>
    <sub>External Kit Hire Form</sub>
    <br>
    <br>
    <div class="flex-box">
      <div class="warning">
        <span class="material-symbols-outlined">
          notification_important
        </span> <b>The following form is for EXTERNAL APPLICANTS
          ONLY.</b><br>
        If you are a <b>student</b> or <b>staff</b> member, please <a
          href="login.html" style="text-decoration: none;"><b>login</b></a> to
        access the internal hire form.
      </div>
      <div class="form">
        <form class="hire" id="externalHireForm" type="_blank"
          action="http://localhost:3000/submit-form" method="POST">
          <ul>
            <li>
              <p
                style="text-align: center; font-weight: 1000; font-size: 20px;"><b>External
                  Hire Form</b></p>
              <label for="name">Name:</label>
              <input type="text" id="name" name="userName" required>*
            </li>
            <li>
              <label for="mail">Company:</label>
              <input type="text" id="company" name="company" required>*
            </li>
            <li>
              <p style="text-align: center;"><b>Event Details</b></p>
              <label for="mail">Event:</label>
              <input type="text" id="subject" name="subject" required>*
            </li>
            <li>
              <li>
                <label for="mail">Start Date:</label>
                <input class="date" type="date" id="startDate" name="startDate"
                  required>*
                <label for="mail">End Date:</label>
                <input class="date" type="date" id="endDate" name="userEmail"
                  required>*
              </li>
              <li>
                <p style="text-align: center;"><b>Message*</b></p>
                <textarea id="msg" name="userMessage" required></textarea>
              </li>
              <li>
                <p style="text-align: center;"><b>Contact Details</b></p>
                <label for="mail">Email:</label>
                <input type="email" id="email" name="userEmail" required>*
              </li>
              <li>
                <label for="mail">Phone:</label>
                <input type="tel" id="phone" name="userPhone"
                  style="border: 1px solid var(--grey);">
              </li>
              <li>
                <label for="mail">Address:</label>
                <input type="text" id="address" name="userAddress"
                  style="border: 1px solid var(--grey);">
              </li>
              <p style="font-size: 70%; color: var(--grey)">*indicates a
                required field</p>

              <button class="hire" id="externalHireSubmit" type="submit"
                form="externalHireForm">Submit</button>
            </li>
          </ul>
        </form>
      </div>
      <script>
        const form = document.getElementById("externalHireForm");
        console.log(form);
        form.addEventListener("submit", function(event) {
          event.preventDefault(); // stop the form from submitting
          const data = new FormData(form); // create a new FormData object
          const xhr = new XMLHttpRequest(); // create a new XMLHttpRequest object
          xhr.open("POST", "http://localhost:3000/submit-form"); // open a new request
          xhr.onload = function() { // when the request is loaded
            if (xhr.status === 200) { // if the request is successful
              document.getElementById("externalHireSubmit").innerHTML = "Submitted"; // change the button text
            } else {
              console.error('Error:', xhr.responseText); // Log the error response
              document.getElementById("error messages").style.display = "block"; // show the error message
            }
          };
          xhr.onerror = function() {
            console.error('Request failed'); // Log if the request fails
            document.getElementById("error messages").style.display = "block"; // show the error message
          };
          xhr.send(data); // send the form data
          event.target.reset(); // reset the form
        });
      </script>
      <div id="error messages" class="accent" style="display: none;">
        <span class="material-symbols-outlined">
          error
        </span>
        <b>ERROR: </b> The form could not be submitted. Please try again.
      </div>
    </div>

  </body>

  <footer>
    <br><br><br><br><br>
    <div class="footer">
      <!--Footer-->
      <p class="white">
        St Clement Danes School<br><br>
        <a
          class="button"
          href="https://www.stclementdanes.org.uk"
          target="_blank"
          rel="noopener noreferrer">Website
        </a>
        <a
          class="button"
          href="https://twitter.com/SCDDofE?ref_src=twsrc%5Etfw"
          target="_blank"
          rel="noopener noreferrer">Follow @SCDDofE
        </a>
        <script
          async
          src="https://platform.twitter.com/widgets.js"></script>
        <!--https://publish.twitter.com/#-->
        <br><br>
        Published under the GNU General Public
        <a
          class="link"
          href="https://madscientist-314.github.io/kitloggerwebsite/licence.html">
          Licence </a><br>
      </p>
    </div>
  </footer>
</html>
